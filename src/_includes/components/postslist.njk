{% for post in postslist | sortById | reverse %}
{% if loop.index == "5" %}
    <div class="mt-4">
      <p class="max-w-2xl mx-auto text-lg text-gray-500 sm:mt-1 text-center px-10">
        If you like the content, consider subscribing to Waveguide Next, a newsletter & blog where I share new examples and lessons on User Experience.
      </p>
      <div class="flex flex-col items-center mt-2"><iframe src="https://whoisjuan.substack.com/embed" width="375" height="320" style="border:1px solid #EEE; background:white;" frameborder="0" scrolling="no"></iframe></div>
    </div>
{% endif %}
{% if loop.index == "16" %}
    <div class="mt-4">
      <p class="max-w-2xl mx-auto text-lg text-gray-500 sm:mt-1 text-center px-10">
        If you like the content, consider subscribing to Waveguide Next, a newsletter & blog where I share new examples and lessons on User Experience.
      </p>
      <div class="flex flex-col items-center mt-2"><iframe src="https://whoisjuan.substack.com/embed" width="375" height="320" style="border:1px solid #EEE; background:white;" frameborder="0" scrolling="no"></iframe></div>
    </div>
{% endif %}
{% if loop.index == "33" %}
    <div class="mt-4">
      <p class="max-w-2xl mx-auto text-lg text-gray-500 sm:mt-1 text-center px-10">
        If you like the content, consider subscribing to Waveguide Next, a newsletter & blog where I share new examples and lessons on User Experience.
      </p>
      <div class="flex flex-col items-center mt-2"><iframe src="https://whoisjuan.substack.com/embed" width="375" height="320" style="border:1px solid #EEE; background:white;" frameborder="0" scrolling="no"></iframe></div>
    </div>
{% endif %}

{% if post.data.field_bgThumbPosition == "center center" %}
{% set position = "center" %}
{% elif post.data.field_bgThumbPosition == "left top" %}
{% set position = "left-top" %}
{% elif post.data.field_bgThumbPosition == "center top" %}
{% set position = "top" %}
{% elif post.data.field_bgThumbPosition == "right top" %}
{% set position = "right-top" %}
{% elif post.data.field_bgThumbPosition == "right center" %}
{% set position = "right" %}
{% elif post.data.field_bgThumbPosition == "left center" %}
{% set position = "left" %}
{% elif post.data.field_bgThumbPosition == "left bottom" %}
{% set position = "left-bottom" %}
{% elif post.data.field_bgThumbPosition == "right bottom" %}
{% set position = "right-bottom" %}
{% elif post.data.field_bgThumbPosition == "center bottom" %}
{% set position = "bottom" %}
{% endif %}

{% set cleanCategories = post.data.field_categoriesRaw | cleanAndSplit %}
<div x-show="(selectedPlatform === '{{post.data.field_platformRaw}}' || selectedPlatform === 'All') && ('{{cleanCategories}}'.includes(selectedCategory) || selectedCategory === 'All')" class="flex flex-col rounded-lg shadow-lg overflow-hidden m-5 relative">
  <div class="flex-shrink-0">
    {% if post.data.field_gif == "1" %}
      <a href="{{post.url}}"><img class="h-72 w-full object-cover object-{{position}}" src="https://thumbs.gfycat.com/{{post.data.field_gfycatSource}}-mobile.jpg" alt=""></a>
    {% else %}
      {% set path = post.data.field_imagePathRaw | getPath %}
      <a href="{{post.url}}"><img class="h-72 w-full object-cover object-{{position}}" src="https://waveguide.gumlet.io/{{path}}?w=&h=500" alt=""></a>
    {% endif %}
    <div class="absolute top-2 right-3">
      {% if "potentially dark" in post.data.field_categoriesRaw %}
        <span class="shadow-xl inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-bold bg-red-500 text-white">
          ðŸ’€ &nbsp; Potentially Dark Pattern
        </span>
      {% endif %}
      {% if post.data.field_gif == "1" %}
        <span class="shadow-xl inline-flex items-center px-2.5 py-0.5 rounded-md text-sm font-bold bg-white text-gray-800">
          GIF
        </span>
      {% endif %}
    </div>
  </div>
  <div class="flex-1 bg-white p-6 flex flex-col justify-between">
    <div class="flex-1">
      <div class="flex items-center">
        {% if post.data.field_platformRaw == "iOS" %}
          <div class="h-12 w-12 mr-4"><img class="object-cover rounded-full" src="/image/ios.png" alt=""></div>
        {% elif post.data.field_platformRaw == "Android" %}
          <div class="h-12 w-12 mr-4"><img class="object-cover rounded-full" src="/image/android.png" alt=""></div>
        {% elif post.data.field_platformRaw == "Web" %}
          <div class="h-12 w-12 mr-4"><img class="object-cover rounded-full" src="/image/web.png" alt=""></div>
        {% elif post.data.field_platformRaw == "Else" %}
          <div class="h-12 w-12 mr-4"><img class="object-cover rounded-full" src="/image/other.png" alt=""></div>
        {% endif %}
        
        <a href="{{post.url}}" class="flex flex-col hover:underline">
          <p class="text-sm font-medium text-indigo-600">
             {{post.data.field_patternSrc}}
          </p>
          <p class="text-xl font-semibold text-gray-900">
            {{post.data.title}}
          </p>
        </div>
      </a>
      <a href="{{post.url}}" class="block mt-2">
        <p class="mt-3 text-base text-gray-500">
          {{post.data.field_what | oneFortyChar | safe  }}
        </p>
      </a>
    </div>
  </div>
</div>
{% endfor %}